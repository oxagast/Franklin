oxagast asked what are some ways i can improve the code at https://raw.githubusercontent.com/oxagast/Franklin/main/franklin.pl with hash 0f43aca6
<---- snip ---->
http://127.0.0.1:8080/respond" ); Irssi::settings_add_str( "franklin", "franklin_response_webserver_token", "1234567890ABCDEF" ); Irssi::settings_add_bool( "franklin", "franklin_use_webserver", 0 ); Irssi::settings_add_bool( "franklin", "franklin_debug", 0 ); Irssi::settings_add_bool( "franklin", "franklin_obey_nick", 0 ); Irssi::settings_add_str( "franklin", "franklin_ignore_channels", "" ); Irssi::settings_add_str( "franklin", "franklin_ignore_nicks", "" ); Irssi::settings_add_str( "franklin", "franklin_ignore_words", "" ); Irssi::signal_add_last('message public', \&sig_public); Irssi::signal_add_last('message private', \&sig_public); ############################################################################# # Main subroutine ############################################################################# sub sig_public { my ($server, $data, $nick, $mask, $target) = @_; return if Irssi::settings_get_bool("franklin_obey_nick") && $nick ne Irssi::settings_get_str("franklin_obey_nick"); my ($channel, $message) = $data =~ /^\s*(\S*)\s:(.*)/; return if $channel eq $server->{nick}; my $ignore_channels = Irssi::settings_get_str("franklin_ignore_channels"); foreach my $ignore_channel (split ' ', $ignore_channels) { return if $channel eq $ignore_channel; } my $ignore_nicks = Irssi::settings_get_str("franklin_ignore_nicks"); foreach my $ignore_nick (split ' ', $ignore_nicks) { return if $nick eq $ignore_nick || $mask eq $ignore_nick; } my $ignore_words = Irssi::settings_get_str("franklin_ignore_words"); foreach my $ignore_word (split ' ', $ignore_words) { return if $message =~ /\b$ignore_word\b/i; } my $token = Irssi::settings_get_str("franklin_response_webserver_token"); my $data_hash = md5_hex(Encode::encode_utf8($message)); my $data_json = encode_json({ data => Sanitize::sanitize($message), token => $token, hash => $data_hash }); my $url = Irssi::settings_get_str("franklin_response_webserver_addr"); my $ua = LWP::UserAgent->new; my $req = HTTP::Request->new(POST => $url); $req->header('Content-Type' => 'application

<!DOCTYPE html> <html><head> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-MN30E29EGC"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag("js", new Date()); gtag("config", "G-MN30E29EGC"); </script> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" type="text/css" href="/css/style.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"> <title>Franklin, a ChatGPT bot</title></head> <body> <div id="content"> <main class="main_section"> <h2 id="title"></h2> <div> <article id="content"> <h2>Franklin</h2><br><i>Fri Jul  7 17:57:47 2023<br>Tokens used: 1100<br>Avg cost: $0.02200<br></i><br><br><br><b>oxagast</b> asked: <br>&nbsp&nbsp&nbsp&nbsp what are some ways i can improve the code at https://raw.githubusercontent.com/oxagast/Franklin/main/franklin.pl<br><br>http://127.0.0.1:8080/respond" ); Irssi::settings_add_str( "franklin", "franklin_response_webserver_token", "1234567890ABCDEF" ); Irssi::settings_add_bool( "franklin", "franklin_use_webserver", 0 ); Irssi::settings_add_bool( "franklin", "franklin_debug", 0 ); Irssi::settings_add_bool( "franklin", "franklin_obey_nick", 0 ); Irssi::settings_add_str( "franklin", "franklin_ignore_channels", "" ); Irssi::settings_add_str( "franklin", "franklin_ignore_nicks", "" ); Irssi::settings_add_str( "franklin", "franklin_ignore_words", "" ); Irssi::signal_add_last('message public', \&sig_public); Irssi::signal_add_last('message private', \&sig_public); ############################################################################# # Main subroutine ############################################################################# sub sig_public { my ($server, $data, $nick, $mask, $target) = @_; return if Irssi::settings_get_bool("franklin_obey_nick") && $nick ne Irssi::settings_get_str("franklin_obey_nick"); my ($channel, $message) = $data =~ /^\s*(\S*)\s:(.*)/; return if $channel eq $server-&gt;{nick}; my $ignore_channels = Irssi::settings_get_str("franklin_ignore_channels"); foreach my $ignore_channel (split ' ', $ignore_channels) { return if $channel eq $ignore_channel; } my $ignore_nicks = Irssi::settings_get_str("franklin_ignore_nicks"); foreach my $ignore_nick (split ' ', $ignore_nicks) { return if $nick eq $ignore_nick || $mask eq $ignore_nick; } my $ignore_words = Irssi::settings_get_str("franklin_ignore_words"); foreach my $ignore_word (split ' ', $ignore_words) { return if $message =~ /\b$ignore_word\b/i; } my $token = Irssi::settings_get_str("franklin_response_webserver_token"); my $data_hash = md5_hex(Encode::encode_utf8($message)); my $data_json = encode_json({ data =&gt; Sanitize::sanitize($message), token =&gt; $token, hash =&gt; $data_hash }); my $url = Irssi::settings_get_str("franklin_response_webserver_addr"); my $ua = LWP::UserAgent-&gt;new; my $req = HTTP::Request-&gt;new(POST =&gt; $url); $req-&gt;header('Content-Type' =&gt; 'application</article> </div> <aside id="meta"> <div> <h5 id="date"><a href="https://franklin.oxasploits.com/">Franklin, a ChatGPT AI powered IRC Bot</a> </h5> </div> </aside> </main> </div></body>